# MuslimInfopreneurs Platform - Next.js Development Guide

## ğŸ“‹ Project Overview
A Netflix-style subscription platform for Muslim francophone training content with affiliate system integration.

---

## ğŸ› ï¸ Technology Stack

### Core Technologies
- **Framework**: Next.js 14+ (App Router)
- **Language**: JavaScript (ES6+)
- **Styling**: Tailwind CSS + shadcn/ui
- **Database**: MongoDB (via MongoDB Atlas) - Better for rapid development
- **ODM**: Mongoose (simpler than Prisma for JS)
- **Authentication**: NextAuth.js v5 (Auth.js)
- **Payment**: Stripe or Paddle
- **Video Hosting**: Bunny.net CDN
- **Email**: Resend or Brevo
- **Analytics**: Plausible.io
- **Deployment**: Vercel or self-hosted

**Note**: MongoDB is recommended for this project because:
- Faster prototyping with flexible schema
- Easier to work with in pure JavaScript
- Better for handling nested data (comments, watch progress)
- Simpler queries without ORM complexity

---

## ğŸ¯ PHASE 1: Project Setup & Foundation (Week 1)

### Step 1.1: Initialize Next.js Project

```bash
# Create Next.js project with JavaScript and Tailwind
npx create-next-app@latest muslim-infopreneurs --js --tailwind --app --eslint

# Navigate to project
cd muslim-infopreneurs

# Install essential dependencies
npm install mongoose
npm install next-auth@beta
npm install react-hook-form
npm install axios swr
npm install date-fns clsx
npm install lucide-react
npm install @radix-ui/react-dialog @radix-ui/react-dropdown-menu @radix-ui/react-select
```

**Explanation for Amazon Q:**
- "Create a Next.js 14 application with App Router, JavaScript (not TypeScript), Tailwind CSS, and ESLint configured"
- "Set up the project structure with src/app directory for routes and src/components for reusable components"

### Step 1.2: Install shadcn/ui Components

```bash
# Initialize shadcn/ui
npx shadcn-ui@latest init

# Install required UI components
npx shadcn-ui@latest add button
npx shadcn-ui@latest add card
npx shadcn-ui@latest add input
npx shadcn-ui@latest add label
npx shadcn-ui@latest add select
npx shadcn-ui@latest add dialog
npx shadcn-ui@latest add dropdown-menu
npx shadcn-ui@latest add avatar
npx shadcn-ui@latest add badge
npx shadcn-ui@latest add tabs
npx shadcn-ui@latest add toast
npx shadcn-ui@latest add skeleton
```

**Amazon Q Prompt:**
"Configure shadcn/ui with Tailwind CSS and create a components.json file with the default configuration"

### Step 1.3: Setup Database with MongoDB

```bash
# Install Mongoose
npm install mongoose
```

**Setup MongoDB Atlas (Free Tier):**
1. Go to https://www.mongodb.com/cloud/atlas
2. Create a free account
3. Create a new cluster (M0 Free tier)
4. Create a database user
5. Whitelist your IP address (or use 0.0.0.0/0 for development)
6. Get your connection string

**Create Database Models** - Create `src/lib/models/` directory:

```bash
mkdir -p src/lib/models
```

**File: `src/lib/models/User.js`**

```javascript
import mongoose from 'mongoose';

const UserSchema = new mongoose.Schema({
  email: {
    type: String,
    required: true,
    unique: true,
    lowercase: true
  },
  name: String,
  emailVerified: Date,
  image: String,
  hashedPassword: String,
  subscriptionType: {
    type: String,
    enum: ['monthly', 'annual', null],
    default: null
  },
  subscriptionStatus: {
    type: String,
    enum: ['active', 'cancelled', 'expired', null],
    default: null
  },
  subscriptionEnd: Date,
  stripeCustomerId: String,
  stripeSubscriptionId: String,
  role: {
    type: String,
    enum: ['user', 'admin'],
    default: 'user'
  }
}, {
  timestamps: true
});

export default mongoose.models.User || mongoose.model('User', UserSchema);
```

**File: `src/lib/models/Training.js`**

```javascript
import mongoose from 'mongoose';

const TrainingSchema = new mongoose.Schema({
  title: {
    type: String,
    required: true
  },
  slug: {
    type: String,
    required: true,
    unique: true
  },
  description: {
    type: String,
    required: true
  },
  thumbnail: String,
  category: {
    type: String,
    required: true
  },
  instructorName: {
    type: String,
    required: true
  },
  instructorBio: String,
  instructorImage: String,
  previewVideoUrl: {
    type: String,
    required: true
  },
  fullCourseUrl: {
    type: String,
    required: true
  },
  affiliateRate: {
    type: Number,
    default: 0.15
  },
  duration: Number, // in minutes
  level: {
    type: String,
    enum: ['beginner', 'intermediate', 'advanced']
  },
  language: {
    type: String,
    default: 'fr'
  },
  published: {
    type: Boolean,
    default: false
  },
  likes: {
    type: Number,
    default: 0
  }
}, {
  timestamps: true
});

TrainingSchema.index({ slug: 1 });
TrainingSchema.index({ category: 1 });
TrainingSchema.index({ published: 1 });

export default mongoose.models.Training || mongoose.model('Training', TrainingSchema);
```

**File: `src/lib/models/WatchProgress.js`**

```javascript
import mongoose from 'mongoose';

const WatchProgressSchema = new mongoose.Schema({
  userId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: true
  },
  trainingId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Training',
    required: true
  },
  progress: {
    type: Number,
    default: 0,
    min: 0,
    max: 100
  },
  lastWatched: {
    type: Date,
    default: Date.now
  },
  completed: {
    type: Boolean,
    default: false
  }
}, {
  timestamps: true
});

WatchProgressSchema.index({ userId: 1, trainingId: 1 }, { unique: true });

export default mongoose.models.WatchProgress || mongoose.model('WatchProgress', WatchProgressSchema);
```

**File: `src/lib/models/Comment.js`**

```javascript
import mongoose from 'mongoose';

const CommentSchema = new mongoose.Schema({
  content: {
    type: String,
    required: true,
    maxlength: 1000
  },
  userId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: true
  },
  trainingId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Training',
    required: true
  }
}, {
  timestamps: true
});

CommentSchema.index({ trainingId: 1, createdAt: -1 });

export default mongoose.models.Comment || mongoose.model('Comment', CommentSchema);
```

**File: `src/lib/models/Like.js`**

```javascript
import mongoose from 'mongoose';

const LikeSchema = new mongoose.Schema({
  userId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: true
  },
  trainingId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Training',
    required: true
  }
}, {
  timestamps: true
});

LikeSchema.index({ userId: 1, trainingId: 1 }, { unique: true });

export default mongoose.models.Like || mongoose.model('Like', LikeSchema);
```

**File: `src/lib/models/AffiliateClick.js`**

```javascript
import mongoose from 'mongoose';

const AffiliateClickSchema = new mongoose.Schema({
  userId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: true
  },
  trainingId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Training',
    required: true
  },
  clickedAt: {
    type: Date,
    default: Date.now
  },
  converted: {
    type: Boolean,
    default: false
  },
  conversionAt: Date,
  commissionAmount: Number
}, {
  timestamps: true
});

AffiliateClickSchema.index({ userId: 1, trainingId: 1 });
AffiliateClickSchema.index({ converted: 1 });

export default mongoose.models.AffiliateClick || mongoose.model('AffiliateClick', AffiliateClickSchema);
```

**File: `src/lib/db.js`** (Database Connection)

```javascript
import mongoose from 'mongoose';

const MONGODB_URI = process.env.MONGODB_URI;

if (!MONGODB_URI) {
  throw new Error('Please define the MONGODB_URI environment variable');
}

let cached = global.mongoose;

if (!cached) {
  cached = global.mongoose = { conn: null, promise: null };
}

async function connectDB() {
  if (cached.conn) {
    return cached.conn;
  }

  if (!cached.promise) {
    const opts = {
      bufferCommands: false,
    };

    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {
      return mongoose;
    });
  }

  try {
    cached.conn = await cached.promise;
  } catch (e) {
    cached.promise = null;
    throw e;
  }

  return cached.conn;
}

export default connectDB;
```

**Amazon Q Prompt:**
"Create Mongoose models for a subscription video platform with: User (with subscription fields), Training (with instructor and affiliate data), WatchProgress (tracking video completion), Comment (with user reference), Like (many-to-many), and AffiliateClick (tracking conversions). Also create a database connection utility with connection caching for Next.js."

### Step 1.4: Environment Variables Setup

Create `.env.local`:

```bash
# Database
MONGODB_URI="mongodb+srv://username:password@cluster.mongodb.net/muslim-infopreneurs?retryWrites=true&w=majority"

# NextAuth
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-secret-key-here" # Generate with: openssl rand -base64 32

# Stripe/Paddle
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_..."
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."

# Bunny.net
BUNNY_STREAM_API_KEY="your-bunny-api-key"
BUNNY_STREAM_LIBRARY_ID="your-library-id"
BUNNY_CDN_HOSTNAME="your-cdn-hostname.b-cdn.net"

# Email (Resend/Brevo)
RESEND_API_KEY="re_..."
EMAIL_FROM="noreply@musliminfopreneurs.com"

# Plausible Analytics
NEXT_PUBLIC_PLAUSIBLE_DOMAIN="musliminfopreneurs.com"
```

**Amazon Q Prompt:**
"Set up environment variables for Next.js with MongoDB connection string, authentication secrets, payment gateway keys, video CDN credentials, and email service configuration"

---

## ğŸ¯ PHASE 2: Authentication & User Management (Week 1-2)

### Step 2.1: Setup NextAuth.js

Create `src/lib/auth.ts`:

```bash
# Create lib directory structure
mkdir -p src/lib
```

**Amazon Q Prompt:**
"Create a NextAuth.js v5 configuration in JavaScript with credentials provider, email provider, MongoDB adapter using Mongoose models, and custom callbacks for subscription status. Include session strategy with JWT and extend session with user subscription data."

Create `src/app/api/auth/[...nextauth]/route.js`:

**Amazon Q Prompt:**
"Create NextAuth.js API route handlers in JavaScript for authentication with GET and POST methods using the auth configuration from lib/auth.js"

### Step 2.2: Create Authentication Components

```bash
# Create components directory
mkdir -p src/components/auth
```

**Amazon Q Prompts:**
1. "Create a responsive login form component in JavaScript using react-hook-form with email/password fields and simple validation. Include error handling and loading states with shadcn/ui components."

2. "Create a registration form component in JavaScript with email, name, password, and password confirmation fields. Include basic email validation, password strength indicator, and terms acceptance checkbox."

3. "Create a user profile dropdown menu component in JavaScript with avatar, user name, subscription status badge, and logout button using shadcn/ui dropdown-menu."

### Step 2.3: Protected Routes & Middleware

Create `src/middleware.js`:

**Amazon Q Prompt:**
"Create Next.js middleware in JavaScript to protect routes requiring authentication. Redirect unauthenticated users to /login and authenticated users with expired subscriptions to /subscribe. Protect /account, /trainings/*, and /admin routes."

---

## ğŸ¯ PHASE 3: Subscription System (Week 2)

### Step 3.1: Install Payment Dependencies

```bash
npm install stripe
npm install @stripe/stripe-js
```

### Step 3.2: Setup Stripe Integration

Create `src/lib/stripe.js`:

**Amazon Q Prompt:**
"Create Stripe utility functions in JavaScript for: 1) Creating checkout sessions with monthly/annual subscription pricing, 2) Creating customer portal sessions, 3) Managing subscription lifecycle, 4) Handling webhook events for subscription created/updated/deleted/payment succeeded/failed"

### Step 3.3: Create Subscription Pages

**Amazon Q Prompts:**

1. "Create a subscription pricing page at /subscribe with two pricing cards (monthly â‚¬9.99 and annual â‚¬79.99 with â‚¬118.87 strikethrough). Include feature comparison, FAQ section, and prominent 'Subscribe Now' buttons that trigger Stripe checkout."

2. "Create a checkout success page at /subscribe/success that thanks users, confirms subscription activation, and shows next steps with a button to explore trainings."

3. "Create a checkout cancelled page at /subscribe/cancelled with a message explaining what happened and options to retry or browse free content."

### Step 3.4: Stripe Webhook Handler

Create `src/app/api/webhooks/stripe/route.js`:

**Amazon Q Prompt:**
"Create a Stripe webhook endpoint in JavaScript that handles checkout.session.completed, customer.subscription.updated, customer.subscription.deleted, and invoice.payment_succeeded events. Update user subscription status in MongoDB and send confirmation emails."

### Step 3.5: Account Management Page

**Amazon Q Prompt:**
"Create a user account page at /account with tabs for: 1) Profile (edit name/email), 2) Subscription (show current plan, renewal date, cancel button with customer portal link), 3) Watch History (list of training progress), 4) Invoices (downloadable receipt links from Stripe)"

---

## ğŸ¯ PHASE 4: Video Platform & Training Catalog (Week 2-3)

### Step 4.1: Bunny.net Integration

Create `src/lib/bunny.js`:

**Amazon Q Prompt:**
"Create Bunny.net utility functions in JavaScript for: 1) Generating signed video URLs with expiration tokens, 2) Fetching video metadata, 3) Uploading videos via API, 4) Managing video libraries, 5) Creating HLS streaming URLs with DRM protection"

### Step 4.2: Video Player Component

```bash
npm install video.js
npm install @types/video.js
```

**Amazon Q Prompt:**
"Create a secure video player component in JavaScript using video.js with: 1) HLS streaming support, 2) Quality selector, 3) Playback speed controls, 4) Watch progress tracking that saves to MongoDB every 10 seconds, 5) Keyboard shortcuts, 6) Right-click and download protection, 7) Responsive design with fullscreen support"

### Step 4.3: Training Catalog (Netflix-style)

**Amazon Q Prompts:**

1. "Create a homepage at / with: 1) Hero section featuring a highlighted training with play button, 2) Horizontal scrollable carousels for categories (Business, Marketing, Development, etc.), 3) Continue Watching section showing user's in-progress trainings, 4) Recommended For You section"

2. "Create a reusable TrainingCard component with: thumbnail, title, instructor name, duration badge, progress bar (if started), like button, and hover effect revealing description preview"

3. "Create a horizontal scrollable carousel component with left/right navigation arrows, smooth scrolling animation, and responsive grid on mobile"

4. "Create a category filter page at /trainings with: sidebar filters (category, level, duration, instructor), sort options (newest, popular, title), grid layout of training cards, and pagination"

### Step 4.4: Training Detail Page

**Amazon Q Prompt:**
"Create a training detail page at /trainings/[slug] with: 1) Video player with preview content, 2) Training title, description, and metadata (duration, level, category), 3) Instructor bio with avatar, 4) 'Buy Full Course' button with affiliate link tracking, 5) Like button with count, 6) Comments section (add/view), 7) Related trainings carousel, 8) Breadcrumb navigation"

---

## ğŸ¯ PHASE 5: Affiliate System (Week 3)

### Step 5.1: Affiliate Click Tracking

Create `src/app/api/affiliate/click/route.js`:

**Amazon Q Prompt:**
"Create an API endpoint in JavaScript that tracks affiliate clicks when users click 'Buy Full Course' buttons. Store userId, trainingId, timestamp in MongoDB and generate a unique tracking URL with UTM parameters. Return the affiliate URL with embedded tracking code."

### Step 5.2: Conversion Tracking Webhook

Create `src/app/api/affiliate/conversion/route.js`:

**Amazon Q Prompt:**
"Create a webhook endpoint in JavaScript to receive conversion notifications from training platforms. Verify webhook signature, update AffiliateClick record in MongoDB to mark as converted, calculate 15% commission, and send notification email to instructor."

### Step 5.3: Affiliate Dashboard (Admin)

**Amazon Q Prompt:**
"Create an admin affiliate dashboard at /admin/affiliates showing: 1) Total clicks and conversions per training, 2) Conversion rate charts, 3) Commission earned per instructor, 4) Export CSV functionality, 5) Filter by date range and instructor, 6) Sortable data table"

---

## ğŸ¯ PHASE 6: Admin Panel (Week 3)

### Step 6.1: Admin Layout & Navigation

**Amazon Q Prompt:**
"Create an admin layout at /admin with: 1) Sidebar navigation (Dashboard, Trainings, Users, Subscriptions, Affiliates, Settings), 2) Top bar with search and admin profile, 3) Breadcrumb navigation, 4) Mobile responsive drawer menu, 5) Route protection checking user role"

### Step 6.2: Training Management

**Amazon Q Prompts:**

1. "Create a training list page at /admin/trainings with: data table showing all trainings, published status toggle, edit/delete actions, search filter, category filter, sort options, and 'Add New Training' button"

2. "Create a training form at /admin/trainings/new and /admin/trainings/[id]/edit with: title, slug (auto-generated), description textarea, thumbnail upload, category select, instructor details, video upload to Bunny.net, duration input, level select, affiliate URL, publish toggle, and save button"

### Step 6.3: User Management

**Amazon Q Prompt:**
"Create a user management page at /admin/users with: searchable data table, subscription status filters, manual subscription grant/revoke, user detail modal showing watch history, role assignment (admin/user), account suspension, and bulk actions"

### Step 6.4: Analytics Dashboard

**Amazon Q Prompt:**
"Create an admin dashboard at /admin with: 1) Key metrics cards (total users, active subscriptions, revenue, watch time), 2) Line chart showing subscription growth over time, 3) Bar chart of most popular trainings, 4) Recent activity feed, 5) Conversion funnel visualization, 6) Date range selector"

---

## ğŸ¯ PHASE 7: Email & Notifications (Week 3-4)

### Step 7.1: Email Templates

```bash
npm install react-email
npm install @react-email/components
```

Create `emails/` directory:

**Amazon Q Prompts:**

1. "Create a welcome email template with React Email components including: logo, personalized greeting, subscription confirmation, quick start guide with CTA buttons, and footer with social links"

2. "Create a subscription renewal reminder email template sent 3 days before renewal with: subscription details, renewal date, pricing, manage subscription link, and cancellation instructions"

3. "Create a new training notification email template with: training thumbnail, title, description excerpt, instructor info, watch now button, and unsubscribe link"

### Step 7.2: Email Sending Service

Create `src/lib/email.js`:

**Amazon Q Prompt:**
"Create email utility functions in JavaScript using Resend API for: 1) Sending transactional emails with templates, 2) Queue system for bulk emails, 3) Email verification link generation, 4) Unsubscribe management, 5) Error handling and retry logic"

### Step 7.3: Automated Email Workflows

Create `src/lib/workflows.js`:

**Amazon Q Prompt:**
"Create automated email workflow functions in JavaScript for: 1) Welcome email on signup, 2) Subscription confirmation on payment, 3) Weekly digest of new trainings, 4) Renewal reminder 3 days before, 5) Re-engagement email for inactive users (30+ days), 6) Affiliate conversion notification to instructors"

---

## ğŸ¯ PHASE 8: Additional Features (Week 4)

### Step 8.1: Like & Comment System

**Amazon Q Prompts:**

1. "Create a like button component that: toggles like status, updates count optimistically, syncs with database via API, shows animation on click, and displays liked state with filled heart icon"

2. "Create a comments section component with: comment list with author avatars, pagination, add comment form with character limit, edit/delete own comments, real-time updates using SWR, and nested reply support (optional)"

### Step 8.2: Search Functionality

```bash
npm install fuse.js
```

**Amazon Q Prompt:**
"Create a global search feature in JavaScript with: 1) Command palette modal triggered by Cmd+K, 2) Fuzzy search using fuse.js across trainings and instructors, 3) Keyboard navigation, 4) Recent searches stored in localStorage, 5) Search analytics tracking, 6) API endpoint at /api/search with rate limiting"

### Step 8.3: Watch Progress Tracking

**Amazon Q Prompt:**
"Create watch progress tracking in JavaScript that: 1) Saves progress to MongoDB every 10 seconds while video plays, 2) Resumes from last position when user returns, 3) Marks training as completed at 95% progress, 4) Shows progress bar on training cards, 5) Syncs across devices via MongoDB"

### Step 8.4: Localization (French/English)

```bash
npm install next-intl
```

**Amazon Q Prompt:**
"Setup next-intl for internationalization with: 1) French as default language, 2) English as secondary, 3) Language switcher in header, 4) Translation files in /messages/fr.json and /messages/en.json, 5) RTL support preparation for future Arabic, 6) Date/number formatting per locale"

---

## ğŸ¯ PHASE 9: Testing & Optimization (Week 4)

### Step 9.1: Testing Setup

```bash
npm install --save-dev @testing-library/react @testing-library/jest-dom jest jest-environment-jsdom
npm install --save-dev @playwright/test
npm install --save-dev cypress
```

**Amazon Q Prompts:**

1. "Setup Jest for unit testing with Next.js configuration in JavaScript, create jest.config.js, setup.js with testing-library matchers, and example test for a Button component"

2. "Setup Playwright for e2e testing in JavaScript with config for authentication flow test, subscription checkout test, video playback test, and admin panel test"

3. "Create test coverage in JavaScript for: authentication flows, subscription checkout, video player functionality, affiliate link tracking, and admin CRUD operations"

### Step 9.2: Performance Optimization

**Amazon Q Prompts:**

1. "Optimize Next.js app with: 1) next/image for all images with proper sizes, 2) Dynamic imports for heavy components, 3) Route prefetching for key pages, 4) Bundle analyzer to identify large dependencies, 5) Font optimization with next/font"

2. "Implement caching strategy with: 1) SWR for data fetching with stale-while-revalidate, 2) Redis for session storage (optional), 3) CDN caching headers, 4) Database query optimization with Prisma, 5) API route caching with Next.js cache"

### Step 9.3: Security Hardening

**Amazon Q Prompt:**
"Implement security measures in JavaScript: 1) CSRF protection on forms, 2) Rate limiting on API routes using middleware, 3) Input sanitization for user content, 4) XSS protection in comments using DOMPurify, 5) Secure headers with next.config.js, 6) Content Security Policy, 7) HTTPS enforcement"

### Step 9.4: SEO Optimization

**Amazon Q Prompt:**
"Optimize for SEO with: 1) Dynamic metadata for all pages using generateMetadata, 2) Structured data (JSON-LD) for trainings and instructors, 3) Sitemap generation at /sitemap.xml, 4) Robots.txt configuration, 5) Open Graph tags for social sharing, 6) Canonical URLs, 7) Alt text for all images"

---

## ğŸ¯ PHASE 10: Deployment & Launch (Week 4)

### Step 10.1: Production Environment Setup

**Amazon Q Prompt:**
"Create production deployment checklist: 1) Setup production MongoDB database (MongoDB Atlas), 2) Configure environment variables on hosting platform, 3) Setup custom domain with SSL, 4) Configure email service with production API keys, 5) Setup Stripe production keys, 6) Configure Bunny.net production CDN, 7) Setup Plausible analytics"

### Step 10.2: Vercel Deployment

```bash
npm install -g vercel

# Login to Vercel
vercel login

# Deploy to production
vercel --prod
```

**Alternatively for self-hosted:**

```bash
# Build production
npm run build

# Start production server
npm start

# Or use PM2 for process management
npm install -g pm2
pm2 start npm --name "muslim-infopreneurs" -- start
```

### Step 10.3: Database Setup for Production

```bash
# No migration commands needed for MongoDB
# Just update MONGODB_URI in production environment variables
```

**Amazon Q Prompt:**
"Create a database seeding script in JavaScript at src/lib/seed.js that adds: 1) Admin user account, 2) 10 sample trainings across different categories, 3) Sample instructor profiles, 4) Test subscription data. Include a command to run it: node src/lib/seed.js"

### Step 10.4: Monitoring Setup

```bash
npm install @sentry/nextjs
```

**Amazon Q Prompt:**
"Setup Sentry error tracking with: 1) Error boundary components, 2) API route error capture, 3) Performance monitoring, 4) User feedback widget, 5) Release tracking, 6) Custom error tags for subscription/payment errors"

### Step 10.5: Backup Strategy

**Amazon Q Prompt:**
"Create backup automation scripts for: 1) Daily database backups to cloud storage, 2) Weekly full system backups, 3) User-generated content backup (comments, profiles), 4) Automated backup verification, 5) Disaster recovery documentation"

---

## ğŸ“ Common Commands Reference

### Development
```bash
npm run dev              # Start development server
npm run build            # Build for production
npm run start            # Start production server
npm run lint             # Run ESLint
npm run type-check       # Run TypeScript compiler check
```

### Database
```bash
npx prisma studio        # Open database GUI
npx prisma generate      # Generate Prisma Client
npx prisma migrate dev   # Create and apply migration
npx prisma migrate reset # Reset database (WARNING: deletes data)
npx prisma db push       # Push schema changes without migration
npx prisma db seed       # Run seed script
```

### Testing
```bash
npm run test             # Run Jest unit tests
npm run test:e2e         # Run Playwright e2e tests
npm run test:coverage    # Generate coverage report
```

### Deployment
```bash
vercel                   # Deploy to preview
vercel --prod            # Deploy to production
vercel env pull          # Pull environment variables
```

---

## ğŸ¨ Design System Guidelines

### Colors (Tailwind Config)
```javascript
colors: {
  primary: {
    50: '#f0fdf4',
    500: '#10b981',  // Main brand color
    900: '#064e3b'
  },
  accent: '#f59e0b'  // CTA buttons
}
```

### Typography
- **Headings**: font-bold, tracking-tight
- **Body**: font-normal, leading-relaxed
- **Small text**: text-sm text-gray-600

### Spacing
- **Container max-width**: 1280px (max-w-7xl)
- **Section padding**: py-12 md:py-24
- **Card padding**: p-6

---

## ğŸ“¦ Project Structure

```
muslim-infopreneurs/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ (auth)/
â”‚   â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â”œâ”€â”€ register/
â”‚   â”‚   â”‚   â””â”€â”€ forgot-password/
â”‚   â”‚   â”œâ”€â”€ (dashboard)/
â”‚   â”‚   â”‚   â”œâ”€â”€ account/
â”‚   â”‚   â”‚   â””â”€â”€ admin/
â”‚   â”‚   â”œâ”€â”€ trainings/
â”‚   â”‚   â”‚   â””â”€â”€ [slug]/
â”‚   â”‚   â”œâ”€â”€ subscribe/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ webhooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ trainings/
â”‚   â”‚   â”‚   â”œâ”€â”€ affiliate/
â”‚   â”‚   â”‚   â””â”€â”€ users/
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ globals.css
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/              # shadcn components
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ trainings/
â”‚   â”‚   â”œâ”€â”€ video/
â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ db.ts            # Prisma client
â”‚   â”‚   â”œâ”€â”€ stripe.ts
â”‚   â”‚   â”œâ”€â”€ bunny.ts
â”‚   â”‚   â”œâ”€â”€ email.ts
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â””â”€â”€ types/
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma
â”‚   â””â”€â”€ seed.ts
â”œâ”€â”€ emails/                   # React Email templates
â”œâ”€â”€ public/
â”œâ”€â”€ .env.local
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.js
â””â”€â”€ package.json
```

---

## ğŸš€ Getting Started Commands for Amazon Q

Copy these prompts to your Amazon Q Coder:

1. **Initial Setup:**
```
Create a Next.js 14 project structure for a Netflix-style subscription platform with authentication, payment processing, and video streaming. Use TypeScript, Tailwind CSS, Prisma ORM, and shadcn/ui components.
```

2. **Database Schema:**
```
Create a complete Prisma schema for a subscription video platform including User, Training, Subscription, WatchProgress, Comment, Like, and AffiliateClick models with appropriate relations.
```

3. **Authentication:**
```
Implement NextAuth.js v5 with email/password authentication, protected routes middleware, login/register forms, and session management with subscription status tracking.
```

4. **Payment System:**
```
Create a Stripe integration with monthly/annual subscription checkout, webhook handler for subscription events, customer portal, and database synchronization.
```

5. **Video Platform:**
```
Build a video player with Bunny.net streaming, watch progress tracking, Netflix-style training catalog with carousels, training detail pages, and affiliate link tracking.
```

---

## ğŸ“ Support Resources

- **Next.js Docs**: https://nextjs.org/docs
- **Prisma Docs**: https://www.prisma.io/docs
- **NextAuth.js**: https://authjs.dev
- **Stripe API**: https://stripe.com/docs/api
- **Bunny.net**: https://docs.bunny.net
- **shadcn/ui**: https://ui.shadcn.com
- **Tailwind CSS**: https://tailwindcss.com/docs

---

## âœ… Pre-Launch Checklist

- [ ] All environment variables configured
- [ ] Database migrated to production
- [ ] Stripe webhooks configured with production endpoint
- [ ] Email service configured and tested
- [ ] Video CDN configured with DRM
- [ ] SSL certificate installed
- [ ] Analytics tracking verified
- [ ] Error monitoring active
- [ ] Backup system running
- [ ] Legal pages published (Terms, Privacy)
- [ ] Admin account created
- [ ] Sample trainings added
- [ ] Payment flow tested end-to-end
- [ ] Mobile responsiveness verified
- [ ] Performance metrics acceptable (Lighthouse score 90+)
- [ ] Security headers configured
- [ ] GDPR compliance verified

---

## ğŸ¯ Success Metrics to Track

1. **User Acquisition**: New signups per day
2. **Conversion Rate**: Free â†’ Paid subscription %
3. **Churn Rate**: Monthly subscription cancellations
4. **Engagement**: Average watch time per user
5. **Affiliate Performance**: Click-through rate and conversions
6. **Revenue**: MRR (Monthly Recurring Revenue) and ARR
7. **Content Performance**: Most watched trainings
8. **Technical**: Page load times, error rates, uptime %

---

*Last Updated: November 2025*